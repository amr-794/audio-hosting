<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تصفح الملفات المرفوعة - استضافة الملفات الصوتية</title>
    <link rel="stylesheet" href="css/main.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path
                        d="M9 18V5l12-2v13M9 18c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3zm12-2c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3z"
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                <h1>استضافة الملفات الصوتية</h1>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html">الرئيسية</a></li>
                <li><a href="upload.html">رفع ملف</a></li>
                <li><a href="browse.html" class="active">تصفح الملفات</a></li>
                <li><a href="playlists.html">قوائم التشغيل</a></li>
                <li><a href="settings.html">الإعدادات</a></li>
            </ul>
        </div>
    </nav>

    <!-- Browse Section -->
    <section class="browse-section">
        <div class="container">
            <div class="section-header">
                <h2>تصفح ملفات مجلد uploads</h2>
                <button class="btn btn-primary" id="scanUploadsBtn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path
                            d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    مسح المجلد
                </button>
            </div>

            <div class="info-box">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <circle cx="12" cy="12" r="10" stroke-width="2" />
                    <path d="M12 16v-4M12 8h.01" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                <div>
                    <h3>كيفية الاستخدام:</h3>
                    <ol>
                        <li>بعد رفع ملف صوتي، سيتم تنزيله تلقائياً إلى جهازك</li>
                        <li>انقل الملف المنزل إلى مجلد <code>uploads</code> في مسار المشروع</li>
                        <li>اضغط "مسح المجلد" لعرض جميع الملفات الموجودة</li>
                        <li>اختر الملفات التي تريد إضافتها إلى النظام</li>
                    </ol>
                </div>
            </div>

            <!-- File Input for Manual Selection -->
            <div class="manual-upload-section">
                <h3>أو اختر ملفات يدوياً من مجلد uploads:</h3>
                <input type="file" id="manualFileInput" accept="audio/*" multiple webkitdirectory directory>
                <button class="btn btn-secondary" id="selectFilesBtn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    اختر مجلد uploads
                </button>
            </div>

            <!-- Files List -->
            <div id="filesListContainer" class="files-list-container">
                <!-- Files will be loaded here -->
            </div>

            <div id="emptyState" class="empty-state show">
                <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                <h3>لم يتم العثور على ملفات</h3>
                <p>اختر مجلد uploads لعرض الملفات الموجودة فيه</p>
            </div>

            <!-- Selected Files Actions -->
            <div id="selectedActions" class="selected-actions hidden">
                <div class="selected-count">
                    تم اختيار <span id="selectedCount">0</span> ملف
                </div>
                <button class="btn btn-primary" id="addSelectedBtn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <line x1="12" y1="5" x2="12" y2="19" stroke-width="2" stroke-linecap="round" />
                        <line x1="5" y1="12" x2="19" y2="12" stroke-width="2" stroke-linecap="round" />
                    </svg>
                    إضافة المحدد إلى النظام
                </button>
                <button class="btn btn-secondary" id="clearSelectionBtn">إلغاء التحديد</button>
            </div>
        </div>
    </section>

    <script src="js/storage.js"></script>
    <script src="js/browse.js"></script>
</body>

</html>