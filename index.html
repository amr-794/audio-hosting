<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>استضافة الملفات الصوتية - Audio Hosting</title>
    <meta name="description" content="منصة استضافة ملفات صوتية احترافية مع إمكانية التضمين والمشاركة">
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="main-nav">
        <div class="nav-container">
            <div class="logo">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                    <circle cx="20" cy="20" r="18" fill="url(#logo-gradient)"/>
                    <path d="M15 12v16l12-8z" fill="white"/>
                    <defs>
                        <linearGradient id="logo-gradient" x1="0" y1="0" x2="40" y2="40">
                            <stop offset="0%" stop-color="#667eea"/>
                            <stop offset="100%" stop-color="#764ba2"/>
                        </linearGradient>
                    </defs>
                </svg>
                <span>Audio Host</span>
            </div>
            <ul class="nav-links">
                <li><a href="#" class="nav-link active" data-view="upload">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                    </svg>
                    رفع ملف
                </a></li>
                <li><a href="#" class="nav-link" data-view="library">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 18V5l12-2v13M9 13l12-2"/>
                    </svg>
                    المكتبة
                </a></li>
                <li><a href="#" class="nav-link" data-view="playlists">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15V6M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM12 12H3M16 6H3M12 18H3"/>
                    </svg>
                    قوائم التشغيل
                </a></li>
                <li><a href="#" class="nav-link" data-view="settings">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/>
                    </svg>
                    الإعدادات
                </a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Upload View -->
        <section id="upload-view" class="view active">
            <div class="upload-container">
                <div class="upload-header">
                    <h1>رفع ملف صوتي جديد</h1>
                    <p>قم برفع ملفاتك الصوتية واحصل على رابط مشاركة وكود تضمين مخصص</p>
                </div>

                <div class="upload-zone" id="uploadZone">
                    <svg class="upload-icon" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                    </svg>
                    <h3>اسحب الملف الصوتي هنا</h3>
                    <p>أو انقر للاختيار من جهازك</p>
                    <p class="file-types">MP3, WAV, OGG, M4A</p>
                    <input type="file" id="audioFileInput" accept="audio/*" hidden>
                </div>

                <!-- Upload Progress -->
                <div class="upload-progress-container" id="uploadProgressContainer" style="display: none;">
                    <div class="upload-file-info">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 18V5l12-2v13"/>
                        </svg>
                        <div class="file-details">
                            <h4 id="uploadFileName">اسم الملف.mp3</h4>
                            <p id="uploadFileSize">0 MB</p>
                        </div>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="uploadProgressBar"></div>
                    </div>
                    <div class="progress-info">
                        <span id="uploadPercentage">0%</span>
                        <span id="uploadSpeed">0 KB/s</span>
                    </div>
                </div>

                <!-- Upload Success -->
                <div class="upload-success" id="uploadSuccess" style="display: none;">
                    <div class="success-icon">
                        <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                            <polyline points="22 4 12 14.01 9 11.01"/>
                        </svg>
                    </div>
                    <h3>تم الرفع بنجاح!</h3>
                    <p>يمكنك الآن مشاركة الملف أو الحصول على كود التضمين</p>
                    <div class="success-actions">
                        <button class="btn btn-primary" id="shareBtn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="18" cy="5" r="3"/>
                                <circle cx="6" cy="12" r="3"/>
                                <circle cx="18" cy="19" r="3"/>
                                <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/>
                                <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/>
                            </svg>
                            مشاركة
                        </button>
                        <button class="btn btn-secondary" id="embedBtn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="16 18 22 12 16 6"/>
                                <polyline points="8 6 2 12 8 18"/>
                            </svg>
                            كود التضمين
                        </button>
                        <button class="btn btn-outline" id="uploadAnotherBtn">رفع ملف آخر</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Library View -->
        <section id="library-view" class="view">
            <div class="library-container">
                <div class="library-header">
                    <h1>مكتبة الملفات الصوتية</h1>
                    <div class="library-actions">
                        <input type="text" class="search-input" placeholder="بحث في الملفات..." id="librarySearch">
                        <select class="sort-select" id="librarySort">
                            <option value="newest">الأحدث</option>
                            <option value="oldest">الأقدم</option>
                            <option value="name">الاسم</option>
                            <option value="size">الحجم</option>
                        </select>
                    </div>
                </div>
                <div class="audio-grid" id="audioGrid">
                    <!-- Audio items will be inserted here -->
                </div>
                <div class="empty-state" id="libraryEmpty">
                    <svg width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                        <path d="M9 18V5l12-2v13M9 13l12-2"/>
                    </svg>
                    <h3>لا توجد ملفات صوتية</h3>
                    <p>ابدأ برفع أول ملف صوتي لك</p>
                    <button class="btn btn-primary" onclick="switchView('upload')">رفع ملف</button>
                </div>
            </div>
        </section>

        <!-- Playlists View -->
        <section id="playlists-view" class="view">
            <div class="playlists-container">
                <div class="playlists-header">
                    <h1>قوائم التشغيل</h1>
                    <button class="btn btn-primary" id="createPlaylistBtn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"/>
                            <line x1="5" y1="12" x2="19" y2="12"/>
                        </svg>
                        قائمة جديدة
                    </button>
                </div>
                <div class="playlists-grid" id="playlistsGrid">
                    <!-- Playlists will be inserted here -->
                </div>
                <div class="empty-state" id="playlistsEmpty">
                    <svg width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                        <path d="M21 15V6M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM12 12H3M16 6H3M12 18H3"/>
                    </svg>
                    <h3>لا توجد قوائم تشغيل</h3>
                    <p>أنشئ قائمة تشغيل لتنظيم ملفاتك الصوتية</p>
                    <button class="btn btn-primary" id="createPlaylistBtn2">إنشاء قائمة</button>
                </div>
            </div>
        </section>

        <!-- Settings View -->
        <section id="settings-view" class="view">
            <div class="settings-container">
                <div class="settings-header">
                    <h1>الإعدادات</h1>
                    <p>تحكم في جميع إعدادات المنصة</p>
                </div>
                <div class="settings-content">
                    <div class="settings-section">
                        <h2>إعدادات المشغل الافتراضي</h2>
                        <div class="setting-item">
                            <label>السمة الافتراضية</label>
                            <select id="defaultTheme">
                                <option value="dark">داكن</option>
                                <option value="light">فاتح</option>
                                <option value="gradient">متدرج</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label>اللون الأساسي</label>
                            <input type="color" id="defaultPrimaryColor" value="#667eea">
                        </div>
                        <div class="setting-item">
                            <label>اللون الثانوي</label>
                            <input type="color" id="defaultSecondaryColor" value="#764ba2">
                        </div>
                        <div class="setting-item">
                            <label>التشغيل التلقائي</label>
                            <input type="checkbox" id="defaultAutoplay" class="toggle-switch">
                        </div>
                    </div>

                    <div class="settings-section">
                        <h2>إعدادات التضمين</h2>
                        <div class="setting-item">
                            <label>العرض الافتراضي</label>
                            <input type="number" id="defaultWidth" value="100" min="200" max="1200">
                            <span class="unit">%</span>
                        </div>
                        <div class="setting-item">
                            <label>الارتفاع الافتراضي</label>
                            <input type="number" id="defaultHeight" value="120" min="80" max="400">
                            <span class="unit">px</span>
                        </div>
                        <div class="setting-item">
                            <label>إظهار أزرار التحكم</label>
                            <input type="checkbox" id="defaultShowControls" class="toggle-switch" checked>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h2>إدارة التخزين</h2>
                        <div class="storage-info">
                            <div class="storage-bar">
                                <div class="storage-used" id="storageUsed" style="width: 0%"></div>
                            </div>
                            <p><span id="storageUsedText">0 MB</span> / <span id="storageTotalText">5 MB</span></p>
                        </div>
                        <button class="btn btn-danger" id="clearStorageBtn">مسح جميع البيانات</button>
                    </div>

                    <div class="settings-section">
                        <h2>النسخ الاحتياطي</h2>
                        <div class="backup-actions">
                            <button class="btn btn-secondary" id="exportDataBtn">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/>
                                </svg>
                                تصدير البيانات
                            </button>
                            <button class="btn btn-secondary" id="importDataBtn">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                                </svg>
                                استيراد البيانات
                            </button>
                            <input type="file" id="importFileInput" accept=".json" hidden>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Share Modal -->
    <div class="modal" id="shareModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>مشاركة الملف الصوتي</h2>
                <button class="modal-close" onclick="closeModal('shareModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="share-option">
                    <label>رابط المشاركة</label>
                    <div class="input-group">
                        <input type="text" id="shareLink" readonly>
                        <button class="btn btn-primary" onclick="copyToClipboard('shareLink')">نسخ</button>
                    </div>
                </div>
                <div class="share-social">
                    <h3>مشاركة عبر</h3>
                    <div class="social-buttons">
                        <button class="social-btn whatsapp">WhatsApp</button>
                        <button class="social-btn twitter">Twitter</button>
                        <button class="social-btn facebook">Facebook</button>
                        <button class="social-btn telegram">Telegram</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Embed Modal -->
    <div class="modal" id="embedModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>كود التضمين</h2>
                <button class="modal-close" onclick="closeModal('embedModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="embed-customization">
                    <h3>خيارات التخصيص</h3>
                    <div class="customization-grid">
                        <div class="custom-option">
                            <label>نوع التضمين</label>
                            <select id="embedType">
                                <option value="full">كامل</option>
                                <option value="minimal">مصغر</option>
                                <option value="button">زر تشغيل</option>
                            </select>
                        </div>
                        <div class="custom-option">
                            <label>السمة</label>
                            <select id="embedTheme">
                                <option value="dark">داكن</option>
                                <option value="light">فاتح</option>
                                <option value="gradient">متدرج</option>
                            </select>
                        </div>
                        <div class="custom-option">
                            <label>العرض</label>
                            <input type="number" id="embedWidth" value="100" min="200" max="1200">
                            <select id="embedWidthUnit">
                                <option value="%">%</option>
                                <option value="px">px</option>
                            </select>
                        </div>
                        <div class="custom-option">
                            <label>الارتفاع</label>
                            <input type="number" id="embedHeight" value="120" min="80" max="400">
                            <span class="unit">px</span>
                        </div>
                        <div class="custom-option">
                            <label>اللون الأساسي</label>
                            <input type="color" id="embedPrimaryColor" value="#667eea">
                        </div>
                        <div class="custom-option">
                            <label>اللون الثانوي</label>
                            <input type="color" id="embedSecondaryColor" value="#764ba2">
                        </div>
                        <div class="custom-option">
                            <label>لون الخلفية</label>
                            <input type="color" id="embedBgColor" value="#1a1a2e">
                        </div>
                        <div class="custom-option">
                            <label>التشغيل التلقائي</label>
                            <input type="checkbox" id="embedAutoplay" class="toggle-switch">
                        </div>
                        <div class="custom-option">
                            <label>إظهار التحكم</label>
                            <input type="checkbox" id="embedShowControls" class="toggle-switch" checked>
                        </div>
                        <div class="custom-option">
                            <label>إظهار الوقت</label>
                            <input type="checkbox" id="embedShowTime" class="toggle-switch" checked>
                        </div>
                    </div>
                </div>

                <div class="embed-preview">
                    <h3>معاينة مباشرة</h3>
                    <div class="preview-container" id="embedPreview">
                        <!-- Preview will be rendered here -->
                    </div>
                </div>

                <div class="embed-code">
                    <h3>كود التضمين</h3>
                    <div class="code-container">
                        <pre id="embedCodeDisplay"><code></code></pre>
                        <button class="btn btn-primary copy-code-btn" onclick="copyEmbedCode()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                            </svg>
                            نسخ الكود
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Playlist Modal -->
    <div class="modal" id="createPlaylistModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>إنشاء قائمة تشغيل جديدة</h2>
                <button class="modal-close" onclick="closeModal('createPlaylistModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>اسم القائمة</label>
                    <input type="text" id="playlistName" placeholder="أدخل اسم القائمة">
                </div>
                <div class="form-group">
                    <label>الوصف (اختياري)</label>
                    <textarea id="playlistDescription" placeholder="أدخل وصف القائمة" rows="3"></textarea>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-primary" id="savePlaylistBtn">إنشاء</button>
                    <button class="btn btn-outline" onclick="closeModal('createPlaylistModal')">إلغاء</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Global Audio Player -->
    <div class="global-player" id="globalPlayer" style="display: none;">
        <div class="player-content">
            <div class="player-info">
                <div class="player-artwork">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 18V5l12-2v13"/>
                    </svg>
                </div>
                <div class="player-details">
                    <h4 id="playerTitle">اسم الملف</h4>
                    <p id="playerTime">0:00 / 0:00</p>
                </div>
            </div>
            <div class="player-controls">
                <button class="control-btn" id="prevBtn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
                    </svg>
                </button>
                <button class="control-btn play-btn" id="playPauseBtn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" id="playIcon">
                        <path d="M8 5v14l11-7z"/>
                    </svg>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" id="pauseIcon" style="display: none;">
                        <path d="M6 4h4v16H6zM14 4h4v16h-4z"/>
                    </svg>
                </button>
                <button class="control-btn" id="nextBtn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M16 18h2V6h-2zm-11-7l8.5-6v12z"/>
                    </svg>
                </button>
            </div>
            <div class="player-progress">
                <div class="progress-track" id="progressTrack">
                    <div class="progress-fill" id="progressFill"></div>
                    <div class="progress-handle" id="progressHandle"></div>
                </div>
            </div>
            <div class="player-volume">
                <button class="control-btn" id="volumeBtn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" id="volumeIcon">
                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                        <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/>
                    </svg>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" id="muteIcon" style="display: none;">
                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                        <line x1="23" y1="9" x2="17" y2="15"/>
                        <line x1="17" y1="9" x2="23" y2="15"/>
                    </svg>
                </button>
                <div class="volume-slider">
                    <input type="range" id="volumeSlider" min="0" max="100" value="100">
                </div>
            </div>
        </div>
        <audio id="audioElement"></audio>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/player.js"></script>
    <script src="js/embed.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
